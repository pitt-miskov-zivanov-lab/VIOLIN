

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Tutorials &mdash; Violin  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Visualization (VIOLIN.visualize_violin)" href="visualization.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Violin
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Legal.html">License and funding</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="files.html">Input and Output Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="in_out.html">Input and Output Functions (<code class="xref py py-mod docutils literal notranslate"><span class="pre">VIOLN.in_out</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="formatting.html">Formatting (<code class="xref py py-mod docutils literal notranslate"><span class="pre">VIOLIN.formatting</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="numeric.html">Numerical Functions (<code class="xref py py-mod docutils literal notranslate"><span class="pre">VIOLIN.numeric</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="network.html">Network Functions (<code class="xref py py-mod docutils literal notranslate"><span class="pre">VIOLIN.network</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="scoring.html">Scoring (<code class="xref py py-mod docutils literal notranslate"><span class="pre">VIOLIN.scoring</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualization (<code class="xref py py-mod docutils literal notranslate"><span class="pre">VIOLIN.visualize_violin</span></code>)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#test-files">Test files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tutorial-1-default-use-general-extension">Tutorial 1: Default Use (general extension)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tutorial-2-specifying-score-and-attributes">Tutorial 2: Specifying Score and Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tutorial-3-using-violin-at-the-terminal">Tutorial 3: Using VIOLIN at the terminal</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tutorial-4-alternative-input">Tutorial 4: Alternative Input</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#machine-reading-output">Machine Reading Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#model-representation">Model Representation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Violin</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Tutorials</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/tutorials.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorials">
<h1>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h1>
<div class="section" id="test-files">
<h2>Test files<a class="headerlink" href="#test-files" title="Permalink to this headline">¶</a></h2>
<p>Input files used to create publication data can be found at [link]</p>
</div>
<div class="section" id="tutorial-1-default-use-general-extension">
<h2>Tutorial 1: Default Use (general extension)<a class="headerlink" href="#tutorial-1-default-use-general-extension" title="Permalink to this headline">¶</a></h2>
<p>This tutorial assumes that the input files are a model in the standard BioRECIPES format
and an LEE set from REACH.</p>
<p>A <cite>violin_tutorial</cite> folder containing an example ipy notebook, input files, and expected output
is included with the VIOLIN package. This tutorial recreates some of the data presented in
[Paper name and link]</p>
</div>
<div class="section" id="tutorial-2-specifying-score-and-attributes">
<h2>Tutorial 2: Specifying Score and Attributes<a class="headerlink" href="#tutorial-2-specifying-score-and-attributes" title="Permalink to this headline">¶</a></h2>
<p>If the user wants to compare attributes in addition to the default, the additional attributes must be defined
before inputting the reading, and then call them in the input_reading function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Location ID&#39;</span><span class="p">]</span>
<span class="n">reading_df</span><span class="p">,</span> <span class="n">reading_cols</span> <span class="o">=</span> <span class="n">input_reading</span><span class="p">(</span><span class="n">reading_file</span><span class="p">,</span> <span class="n">evidence_score_cols</span><span class="p">,</span><span class="n">atts</span><span class="o">=</span><span class="n">attributes</span><span class="p">)</span>
</pre></div>
</div>
<p>If the user wants to use a different scoring scheme than the default (e.g. to account for the subclassifications in judgement),
a scoring dictionary must be defined before calling the scoring function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kind_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;strong corroboration&quot;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;weak corroboration1&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;weak corroboration2&quot;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;weak corroboration3&quot;</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">&quot;hanging extension&quot;</span> <span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
            <span class="s2">&quot;full extension&quot;</span> <span class="p">:</span> <span class="mi">41</span><span class="p">,</span>
            <span class="s2">&quot;internal extension&quot;</span> <span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
            <span class="s2">&quot;specification&quot;</span> <span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s2">&quot;dir contradiction&quot;</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;sign contradiction&quot;</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
            <span class="s2">&quot;att contradiction&quot;</span> <span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
            <span class="s2">&quot;flagged1&quot;</span> <span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
            <span class="s2">&quot;flagged2&quot;</span> <span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
            <span class="s2">&quot;flagged3&quot;</span> <span class="p">:</span> <span class="mi">22</span><span class="p">}</span>
<span class="n">scored</span> <span class="o">=</span> <span class="n">score_reading</span><span class="p">(</span><span class="n">reading_df</span><span class="p">,</span><span class="n">model_df</span><span class="p">,</span><span class="n">graph</span><span class="p">,</span><span class="n">reading_cols</span><span class="p">,</span><span class="n">kind_values</span> <span class="o">=</span> <span class="n">kind_dict</span><span class="p">,</span><span class="n">attributes</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="tutorial-3-using-violin-at-the-terminal">
<h2>Tutorial 3: Using VIOLIN at the terminal<a class="headerlink" href="#tutorial-3-using-violin-at-the-terminal" title="Permalink to this headline">¶</a></h2>
<p>This tutorial assumes that the input files are a model in the standard BioRECIPES format
and an LEE set from REACH. This tutorial also assumes that the user wants to run VIOLIN
for basic extension using VIOLIN’s default values, and visualization is for the total output</p>
<p>The <cite>use_violin.py</cite> script is included in the  <cite>violin_tutorial</cite> folder. The input for this script allows for four classification schemes:</p>
<ol class="arabic simple">
<li><p>‘extend’ - default Kind and Match Score values for general extension</p></li>
<li><p>‘extend subcategories’ - general extension values with subcategories specified in Kind Score values</p></li>
<li><p>‘corroborate’ - Kind and Match Score values for general corroboration (preference towards strong corroborations, weak corroborations, contradictions)</p></li>
<li><p>‘corroborate subcategories’ - general extension values with subcategories specified in Kind Score values</p></li>
</ol>
<p>as well as the same filtering options from <a class="reference internal" href="visualization.html"><span class="doc">Visualization (VIOLIN.visualize_violin)</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="use_violin.use_violin">
<span class="sig-prename descclassname"><span class="pre">use_violin.</span></span><span class="sig-name descname"><span class="pre">use_violin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lee_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">score</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'extend'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filt_opt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'100%'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/use_violin.html#use_violin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#use_violin.use_violin" title="Permalink to this definition">¶</a></dt>
<dd><p>This function calculates the Match Score for an interaction from the reading</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_file</strong> (<em>str</em>) – Directory and filename of the the machine reading spreadsheet output
Accepted files: .txt, .csv, .tsv, .xlsx</p></li>
<li><p><strong>lee_file</strong> (<em>str</em>) – Directory and filename of the model file in BioRECIPE format
Accepted files: .txt, .csv, .tsv, .xlsx</p></li>
<li><p><strong>out_file</strong> (<em>str</em>) – Directory and filename of the output suffix</p></li>
<li><p><strong>score</strong> (<em>str</em>) – Scoring scheme used for classification
Options are: ‘extend’, ‘extend subcategories’, ‘corroborate’, ‘corroborate subcategories’</p></li>
<li><p><strong>filt_opt</strong> (<em>str</em>) – How much VIOLIN output should be visualized. Can be filtered
by top % of total score, evidence score (Se) threshold, or
total score (St) threshold
Accepted options are ‘X%’,’Se&gt;Y’, or ‘St&gt;Z’,
where X, Y, and Z, are values
Default is ‘100%’ (Total Output)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>To run <cite>use_violin.py</cite> at the command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">use_violin</span><span class="o">.</span><span class="n">py</span> <span class="n">test_input</span><span class="o">/</span><span class="n">ModelA</span><span class="o">.</span><span class="n">csv</span> <span class="n">test_input</span><span class="o">/</span><span class="n">RA2_reading</span><span class="o">.</span><span class="n">xlsx</span> <span class="n">output</span> <span class="n">extend</span> <span class="mi">50</span><span class="o">%</span>
</pre></div>
</div>
</div>
<div class="section" id="tutorial-4-alternative-input">
<h2>Tutorial 4: Alternative Input<a class="headerlink" href="#tutorial-4-alternative-input" title="Permalink to this headline">¶</a></h2>
<div class="section" id="machine-reading-output">
<h3>Machine Reading Output<a class="headerlink" href="#machine-reading-output" title="Permalink to this headline">¶</a></h3>
<p>REACH has a specific output format, where the source nodes are separated by their regulation sign - positive regulators are stored
separately from negative regulators. In other machine readers, source nodes are not separated, and instead the regulation sign is stored
as a node attribute (e.g. increase/decrease or activate/inhibit):</p>
<p>The <a class="reference internal" href="formatting.html#VIOLIN.formatting.convert_reading" title="VIOLIN.formatting.convert_reading"><code class="xref py py-func docutils literal notranslate"><span class="pre">VIOLIN.formatting.convert_reading()</span></code></a> can automatically separate the regulators into the specific positive/negative
distinctions, along with any associated attributes.</p>
<p>If the user has the following machine reading output spreadsheet:</p>
<table class="colwidths-given tight-table docutils align-default" id="id1">
<caption><span class="caption-text">LEE input spreadsheet</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Target Name</strong></p></td>
<td><p><strong>Target ID</strong></p></td>
<td><p><strong>Target Type</strong></p></td>
<td><p><strong>Source Name</strong></p></td>
<td><p><strong>Source ID</strong></p></td>
<td><p><strong>Source Type</strong></p></td>
<td><p><strong>Source Location</strong></p></td>
<td><p><strong>Regulation</strong></p></td>
<td><p><strong>PMCID</strong></p></td>
<td><p><strong>Evidence</strong></p></td>
</tr>
<tr class="row-even"><td><p>Name</p></td>
<td><p>ID</p></td>
<td><p>Type</p></td>
<td><p>regulator name</p></td>
<td><p>reg ID</p></td>
<td><p>reg type</p></td>
<td><p>reg location</p></td>
<td><p>increase/decrease</p></td>
<td><p>PMCID</p></td>
<td><p>evidence text</p></td>
</tr>
</tbody>
</table>
<p>Running the following function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reading_df</span> <span class="o">=</span> <span class="n">convert_reading</span><span class="p">(</span><span class="n">reading</span><span class="p">,</span> <span class="s1">&#39;separate&#39;</span><span class="p">,</span> <span class="n">atts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Would produce the new spreadsheet (stored as a pandas dataframe)</p>
<table class="colwidths-given tight-table docutils align-default" id="id2">
<caption><span class="caption-text">LEE input spreadsheet</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Target Name</strong></p></td>
<td><p><strong>Target ID</strong></p></td>
<td><p><strong>Target Type</strong></p></td>
<td><p><strong>Positive Source Name</strong></p></td>
<td><p><strong>Positive Source ID</strong></p></td>
<td><p><strong>Positive Source Type</strong></p></td>
<td><p><strong>Positive Source Location</strong></p></td>
<td><p><strong>Negative Source Name</strong></p></td>
<td><p><strong>Negative Source ID</strong></p></td>
<td><p><strong>Negative Source Type</strong></p></td>
<td><p><strong>Negative Source Location</strong></p></td>
<td><p><strong>PMCID</strong></p></td>
<td><p><strong>Evidence</strong></p></td>
</tr>
<tr class="row-even"><td><p>Name</p></td>
<td><p>ID</p></td>
<td><p>Type</p></td>
<td><p>Pos regulator</p></td>
<td><p>reg ID</p></td>
<td><p>reg type</p></td>
<td><p>reg location</p></td>
<td><p>Neg regulator</p></td>
<td><p>reg ID</p></td>
<td><p>reg type</p></td>
<td><p>reg location</p></td>
<td><p>PMCID</p></td>
<td><p>evidence text</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="model-representation">
<h3>Model Representation<a class="headerlink" href="#model-representation" title="Permalink to this headline">¶</a></h3>
<p>While the BioRECIPES format is necessary for the DySE modeling framework, models are frequently presented as node-edge lists.
In this case, the model will need to be converted to the BioRECIPE format using the <code class="xref py py-func docutils literal notranslate"><span class="pre">VIOLIN.formatting.nconvert_to_biorecipes()</span></code> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model_df</span><span class="p">,</span><span class="n">graph</span> <span class="o">=</span> <span class="n">formatting</span><span class="o">.</span><span class="n">convert_to_biorecipes</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">att_list</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span><span class="s1">&#39;organism&#39;</span><span class="p">],</span> <span class="n">separate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>In a single step, VIOLIN separates the regulators into positive and negative (if needed) and condenses interactions into lists of regulators
for each element, as shown in <a class="reference internal" href="files.html#input"><span class="std std-ref">Input</span></a>. VIOLIN also adds the weights representing the regulation sign, necessary for the <code class="xref py py-func docutils literal notranslate"><span class="pre">VIOLIN.formatting.path_finding()</span></code> function,
making use of the already created node-edge list instead of calling on the <code class="xref py py-func docutils literal notranslate"><span class="pre">VIOLIN.formatting.node_edge_list()</span></code> function.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="visualization.html" class="btn btn-neutral float-left" title="Visualization (VIOLIN.visualize_violin)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, MeLoDy Lab.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>